<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Furry Badges</title>
    <link href="//cdn.muicss.com/mui-0.10.3/css/mui.min.css" rel="stylesheet" type="text/css"/>
    <script src="//cdn.muicss.com/mui-0.10.3/js/mui.min.js"></script>
    <script>
        const $ = (id) => document.getElementById(id)
        const updateBadge = () => {
            const site = $("site").value.trim()
            const label = $("label").value.trim()
            const username = $("username").value.trim()
            let url = ""
            if (username.length === 0) url = ""
            else url = `https://furry-badges.herokuapp.com/badge/user/${site}/${encodeURIComponent(username)}?label=${$("noLabel").checked ? "+" : encodeURIComponent(label || site)}`
            $("badge").src = url
            $("badgeURL").href = url
            $("examples").hidden = url.length === 0
            Array.from(document.getElementsByClassName("badgeURLText")).forEach(elem => elem.innerText = url)
        }

        window.onload = () => updateBadge()
    </script>
</head>
<body>
<div style="max-width: 600px; margin: auto">
    <form class="mui-form">
        <legend>Furry Badges</legend>
        <div class="mui-select">
            <select id="site" onchange="updateBadge()">
                {% for site in sites %}
                    <option value="{{ site }}">{{ site }}</option>
                {% endfor %}
            </select>
            <label>Site</label>
        </div>
        <div class="mui-textfield">
            <input id="label" type="text"
                   oninput="updateBadge()">
            <label>Label</label>
        </div>
        <div class="mui-checkbox">
            <label>
                <input type="checkbox" id="noLabel" value=""
                       onclick="$('label').disabled = this.checked; updateBadge()">
                No label
            </label>
        </div>
        <div class="mui-textfield">
            <input id="username" type="text"
                   oninput="updateBadge()">
            <label>Username</label>
        </div>
    </form>
    <br><br>
    <div style="text-align: center">
        <a id="badgeURL" href=""><img id="badge" src="" alt=""></a>
    </div>
    <br><br>
    <div id="examples">
        <div class="mui--text-subhead">Markdown</div>
        <code>
            ![](<span class="badgeURLText"></span>)
        </code>
        <br><br>
        <div class="mui--text-subhead">AsciiDoc</div>
        <code>
            image::<span class="badgeURLText"></span>[]
        </code>
        <br><br>
        <div class="mui--text-subhead">reStructuredText</div>
        <code>
            .. image:: <span class="badgeURLText"></span>
        </code>
    </div>
</div>
</body>
</html>