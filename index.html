<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Furry Badges</title>
    <link href="//fonts.googleapis.com/css?family=Rubik:300,400,500,700" rel="stylesheet" type="text/css"/>
    <link href="//cdn.muicss.com/mui-0.10.3/css/mui.min.css" rel="stylesheet" type="text/css"/>
    <script src="//cdn.muicss.com/mui-0.10.3/js/mui.min.js"></script>
    <style>
        body, body * {
            font-family: Rubik, -apple-system, sans-serif;
            font-size: 100%;
        }

        code, code * {
            font-family: monospace;
            font-size: min(2.5vw, 100%);
        }
    </style>
    <script>
        const $ = (id) => document.getElementById(id)
        const updateBadge = () => {
            const site = $("site").value.trim()
            const label = $("label").value.trim()
            const username = $("username").value.trim()
            let url = ""
            if (username.length === 0) url = ""
            else url = `/badge/user/${site}/${encodeURIComponent(username)}?label=${$("noLabel").checked ? "+" : encodeURIComponent(label || site)}`
            $("badge").src = url
            $("badgeURL").href = url
            $("examples").hidden = url.length === 0
            Array.from(document.getElementsByClassName("badgeURLText")).forEach(elem => elem.innerText = "https://furry-badges.herokuapp.com" + url)
        }

        window.onload = () => updateBadge()
    </script>
</head>
<body>
<div style="max-width: 600px; margin: auto">
    <div style="margin: 20px">
        <a href="https://gitlab.com/projects/32921925"><img
                src="https://img.shields.io/badge/Source-GitLab-orange?logo=gitlab" alt=""></a>
        <br><br>
        <form class="mui-form">
            <legend color="var(--color)">Furry Badges</legend>
            <div class="mui-select">
                <select id="site" onchange="updateBadge()">
                    <option value="" disabled hidden selected>Select site</option>
                    {% for site in sites %}
                    <option value="{{ site }}">{{ site }}</option>
                    {% endfor %}
                </select>
                <label>Site</label>
            </div>
            <div class="mui-textfield">
                <input id="label" type="text"
                       oninput="updateBadge()">
                <label>Label</label>
            </div>
            <div class="mui-checkbox">
                <label>
                    <input type="checkbox" id="noLabel" value=""
                           onclick="$('label').disabled = this.checked; updateBadge()">
                    No label
                </label>
            </div>
            <div class="mui-textfield">
                <input id="username" type="text"
                       oninput="updateBadge()">
                <label>Username</label>
            </div>
        </form>
        <br><br>
        <div style="text-align: center">
            <a id="badgeURL" href=""><img id="badge" src="" alt=""></a>
        </div>
        <br><br>
        <div id="examples">
            <div class="mui--text-subhead">Markdown</div>
            <div style="background: #F3F3F3"><code>
                ![](<span class="badgeURLText"></span>)
            </code></div>
            <br><br>
            <div class="mui--text-subhead">AsciiDoc</div>
            <div style="background: #F3F3F3"><code>
                image::<span class="badgeURLText"></span>[]
            </code></div>
            <br><br>
            <div class="mui--text-subhead">reStructuredText</div>
            <div style="background: #F3F3F3"><code>
                .. image:: <span class="badgeURLText"></span>
            </code></div>
        </div>
    </div>
</div>
</body>
</html>